{"version":3,"file":"index.js","sources":["../src/Context.tsx","../node_modules/style-inject/dist/style-inject.es.js","../src/Components/Offcanvas.tsx","../src/Components/Trigger.tsx"],"sourcesContent":["import React, { createContext, useReducer } from 'react'\nimport { ProviderProps } from '.'\n\ntype State = {\n  isOpen: boolean\n}\n\ntype Action = { type: 'open' } | { type: 'close' }\n\nfunction reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case 'open':\n      return {\n        isOpen: true\n      }\n    case 'close':\n      return {\n        isOpen: false\n      }\n    default:\n      return state\n  }\n}\n\nconst randomId = window.crypto.getRandomValues(new Uint32Array(1))[0].toString(36)\n\ninterface ContextProps {\n  isOpen?: boolean\n  handleOpen?: () => void\n  handleClose?: () => void\n  randomId: string\n}\n\nexport const AppContext = createContext<ContextProps>({\n  isOpen: false,\n  randomId: ''\n})\n\nexport function OffcanvasProvider({ children, onOpen, onClose }: ProviderProps) {\n  const [{ isOpen }, dispatch] = useReducer(reducer, {\n    isOpen: false\n  })\n\n  const handleOpen = () => {\n    dispatch({ type: 'open' })\n    if (onOpen) onOpen()\n  }\n  const handleClose = () => {\n    dispatch({ type: 'close' })\n    if (onClose) onClose()\n  }\n\n  return (\n    <AppContext.Provider value={{ isOpen, handleOpen, handleClose, randomId }}>\n      <div className='simple-offcanvas-component'>{children}</div>\n    </AppContext.Provider>\n  )\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useCallback, useContext, useEffect } from 'react'\nimport css from '../styles.module.css'\nimport { AppContext } from '../Context'\nimport { OffcanvasProps } from '..'\n\nexport function Offcanvas({\n  title = 'Offcanvas Title',\n  position = 'right',\n  backdrop = true,\n  allowClickAway = true,\n  allowEsc = true,\n  allowScroll = true,\n  className = 'simple-offcanvas',\n  styles = {},\n  children\n}: OffcanvasProps) {\n  const { handleClose, isOpen, randomId } = useContext(AppContext)\n\n  const onClickOutside = useCallback(() => {\n    if (!allowClickAway) return\n\n    if (isOpen) {\n      if (handleClose) handleClose()\n    }\n  }, [allowClickAway, isOpen, handleClose])\n\n  const onEscKey = useCallback(\n    (event: KeyboardEvent) => {\n      if (!allowEsc) return\n\n      if (event.key === 'Escape') {\n        if (isOpen) {\n          if (handleClose) handleClose()\n        }\n      }\n    },\n    [allowEsc, isOpen, handleClose]\n  )\n\n  useEffect(() => {\n    document.addEventListener('keydown', onEscKey, false)\n    return () => document.removeEventListener('keydown', onEscKey)\n  }, [onEscKey])\n\n  useEffect(() => {\n    document.addEventListener('click', onClickOutside, false)\n    return () => document.removeEventListener('click', onClickOutside)\n  }, [onClickOutside])\n\n  useEffect(() => {\n    if (!allowScroll) {\n      if (isOpen) document.body.style.overflow = 'hidden'\n    }\n\n    return () => {\n      document.body.style.overflow = ''\n    }\n  }, [isOpen, allowScroll])\n\n  return (\n    <>\n      <div\n        id={`offcanvas_${randomId}`}\n        className={`${css.offcanvas} ${css[position]} ${isOpen ? css.show : ''} ${className}`}\n        tabIndex={-1}\n        style={styles}\n        role='dialog'\n        aria-labelledby={css.title}\n        aria-modal='true'\n        onClick={(event) => event.stopPropagation()}\n        aria-hidden='true'\n      >\n        <div className={css.header}>\n          <h5 className={css.title}>{title}</h5>\n          <button className={css.close} onClick={handleClose} type='button' tabIndex={0} aria-label='Close' />\n        </div>\n        <div className={css.body}>\n          {children ||\n            'Some text as placeholder. In real life you can have the elements you have chosen. Like, text, images, lists, etc.'}\n        </div>\n      </div>\n      {backdrop && <div className={`${css.backdrop} ${isOpen ? css.show : ''}`} />}\n    </>\n  )\n}\n","import React, { useContext } from 'react'\nimport { AppContext } from '../Context'\nimport { TriggerProps } from '..'\n\nexport function Trigger({\n  component = 'button',\n  className = 'offcanvas-trigger',\n  styles = {},\n  children\n}: TriggerProps) {\n  const { handleOpen, randomId } = useContext(AppContext)\n\n  return component === 'button' ? (\n    <button\n      type='button'\n      className={className}\n      onClick={handleOpen}\n      style={styles}\n      tabIndex={0}\n      aria-controls={`offcanvas_${randomId}`}\n    >\n      {children || 'Offcanvas Trigger'}\n    </button>\n  ) : (\n    <div\n      className={className}\n      onClick={handleOpen}\n      style={styles}\n      role='button'\n      tabIndex={0}\n      aria-controls={`offcanvas_${randomId}`}\n      aria-hidden='true'\n    >\n      {children || 'Offcanvas Trigger'}\n    </div>\n  )\n}\n"],"names":["reducer","state","action","type","isOpen","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","randomId","window","crypto","getRandomValues","Uint32Array","toString","AppContext","createContext","_a","_b","title","_c","position","_d","backdrop","_e","allowClickAway","_f","allowEsc","_g","allowScroll","_h","className","_j","styles","children","_k","useContext","handleClose","onClickOutside","useCallback","onEscKey","event","key","useEffect","addEventListener","removeEventListener","body","overflow","React","id","offcanvas","show","tabIndex","role","onClick","stopPropagation","header","close","onOpen","onClose","useReducer","dispatch","Provider","value","handleOpen","component"],"mappings":"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"}